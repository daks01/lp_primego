---
import StarTrekText from "../ui/StarTrekText.astro";
import { Image } from "astro:assets";
import imgImperial from "/src/assets/img/limit-collection/imperial.png";
import imgRoyal from "/src/assets/img/limit-collection/royal.png";
import Section from "../ui/Section.astro";
import { productOptMap } from "../../utils/product-list";
---

<Section class="section">
	<div class="limit">
		<div class="limit-header">
      <StarTrekText as="h4" class="limit-header__title" id="nav-title">
        лимитированные коллекции
      </StarTrekText>
      <p>Уникальный стиль под уникальных людей</p>
		</div>
		<nav aria-labeledby="nav-title">
			<ul class="menu">
				<li class="menu__item">
					<a href="empire" class="menu__link card">
						<div class="card__left">
							<span class="card__subtitle">Непобедимый стиль</span>
							<StarTrekText
								title="Империя"
								class="card__title card__title_scale"
								as="span"
								style="color: var(--color-product-empire)"
							>
								{productOptMap.empire.name}
							</StarTrekText>
							<div>
								<span class="read-more">
									Посмотреть
								</span>
							</div>
						</div>
						<div class="card__right">
							<Image
								src={imgImperial}
								class="splide__slide"
								alt=""
								role="presentation"
								loading="lazy"
								class="card__img"
							/>
						</div>
					</a>
				</li>
				<li class="menu__item">
					<a href="royal" class="menu__link card">
						<div class="card__left">
							<span class="card__subtitle">Уникальный стиль</span>
							<StarTrekText
								title="Рояль"
								class="card__title"
								as="span"
								style="color: var(--color-product-royal)"
							>
								{productOptMap.royal.name}
							</StarTrekText>
							<div>
								<span class="read-more">
									Посмотреть
								</span>
							</div>
						</div>
						<div class="card__right">
							<Image
								src={imgRoyal}
								class="splide__slide"
								alt=""
								role="presentation"
								loading="lazy"
								class="card__img"
							/>
						</div>
					</a>
				</li>
			</ul>
		</nav>
	</div>
</Section>

<style>
  .section {
    background-color: #0e0205;
    min-height: auto !important;
  }
  .limit {
    margin-bottom: var(--90px);
  }
  .limit-header {
    text-align: center;
    margin-top: 0;
  }
  .limit-header__title {
    font-size: calc(var(--1px) * 80);
    margin-top: 0;
  }
  .menu {
    margin: calc(var(--30px) * -1) 0 0;
    padding: 0;
    display: flex;
    justify-content: center;
    gap: calc(var(--1px) * 140);
  }
  .menu__item {
    list-style-type: none;
    padding: 0;
    margin: 0 0 var(--90px);
    flex-basis: 37%;
  }
  .menu__link {
    text-decoration: none;
    color: var(--text-color);
  }
  .card {
    display: flex;
    justify-content: space-between;
    padding: calc(var(--1px) * 20) 0 calc(var(--1px) * 25) calc(var(--1px) * 55);
    position: relative;
    z-index: 1;
    &:before,
    &:after {
      content: "";
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }
    &::before {
      background: linear-gradient(
        267.46deg,
        #8c1630 1.33%,
        var(--color-black) 97.51%
      );
      clip-path: polygon(6% 0, 100% 0%, 100% 100%, 0 100%, 0 13%);
      z-index: -1;
    }
    &::after {
      border-radius: 100%;
      transform: rotate(-13.75deg);
      background-color: rgba(252, 20, 71, 0.35);
      mix-blend-mode: hard-light;
      filter: blur(var(--90px));
      z-index: -2;
      transition: background-color ease 0.5s;
    }
  }

  @media(hover: hover) and (pointer: fine) {
    .card {
      &:hover {
        .card__img {
          transform: rotate(-19deg) scale(1.2) translateY(-10%);
        }
        &:after {
          background-color: rgba(252, 20, 71, 0.55);
        }
      }
    }
  }
  .card__left {
    font-size: var(--heading-4);
    display: flex;
    flex-direction: column;
  }
  .card__right {
    position: relative;
  }

  .card__img {
    right: calc(var(--60px) * -1);
    max-width: none;
    position: absolute;
    top: calc(var(--30px) * -1);
    width: calc(var(--1px) * 300);
    transform: rotate(-8deg);
    transition: transform ease 0.1s;
  }
  .card__title {
    font-size: calc(var(--1px) * 128);
    margin-bottom: calc(var(--1px) * 32);
    display: block;
    /* bg text */
    &::after {
      content: attr(title);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      font-size: calc(var(--1px) * 414);
      line-height: 0.58;
      color: var(--color-product);
      clip-path: polygon(6% 0%, 100% 0%, 100% 100%, 0 100%, 0 13%);
      opacity: 0.15;
      z-index: -1;
      pointer-events: none;
      transition: opacity ease 0.5s;
    }
  }
  .card__title_scale::after {
    clip-path: polygon(8% 0%, 160% 0%, 160% 100%, 0 100%, 0 13%);
    transform: scaleX(0.63);
    transform-origin: left;
  }
  .card__subtitle {
    font-weight: 600;
    margin-bottom: calc(var(--1px) * 10);
  }
  .read-more {
    display: inline-block;
    background-color: var(--color-product-primego);
    border: none;
    padding: calc(var(--1px) * 14) calc(var(--1px) * 32);
    color: var(----color-white);
    font-weight: 600;
    font-size: var(--small-font-size);
    border-radius: var(--4px);
  }

  @media screen and (max-width: 1023px) {
    .section {
      order: -1;
    }
    .limit {
      margin-bottom: 0;
    }
    .limit-header {
      display: none;
    }
    .limit-header__title {
      font-size: var(--heading-1);
      line-height: 0.72;
    }
    .menu {
      flex-direction: column;
      margin: var(--60px) calc(var(--gutter) * -1) var(--45px);
      gap: var(--45px);
    }
    .menu__item {
      margin: 0;
      flex-basis: 100%;
    }
    .card {
      padding: calc(var(--1px) * 10) 0 var(--15px) var(--30px);
      &::after {
        filter: blur(var(--30px));
      }
    }
    .card__title {
      font-size: calc(var(--1px) * 64);
      margin-bottom: var(--15px);
      /* bg text */
      &::after {
        font-size: calc(var(--1px) * 240);
      }
    }
    .card__right {
      margin-bottom: 0;
      transform: none;
    }
    .card__img {
      top: calc(var(--1px) * 10);
      right: var(--4px);
      width: calc(var(--1px) * 135);
    }
    .card__subtitle {
      font-size: var(--small-font-size);
    }
    .read-more {
      padding: calc(var(--1px) * 8) var(--15px);
    }
  }
</style>
