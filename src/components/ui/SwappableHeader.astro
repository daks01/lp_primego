---
import SliderButton from '../content/Gallery/SliderButton.astro';
import StarTrekText from './StarTrekText.astro';
import { productOptMap } from '../../utils/product-list';

interface Props {
    as?: string;
    class?: string;
    sku: string;
}
const { as: Element = 'header', class: className, sku } = Astro.props;

const product = productOptMap[sku];

const productList = Object.entries(productOptMap);
const currentIndex = productList.findIndex(([s]) => s === sku);
const next = productList[(currentIndex + 1) % productList.length][1].altName;
const prev = productList[(currentIndex - 1 + productList.length) % productList.length][1].altName;
---

<Element class:list={['header', product.altName, className]}>
    <SliderButton
        as="a"
        variant="left"
        data-swappable-header-button="prev"
        aria-label="Предыдущая обувь"
        href={`/shop/${prev}`}
    />
    <StarTrekText as="h1" class="header__title">{product.name}</StarTrekText>
    <div class="header__img">
        <slot name="image" />
    </div>
    <SliderButton
        as="a"
        variant="right"
        data-swappable-header-button="next"
        aria-label="Следующая обувь"
        href={`/shop/${next}`}
    />
</Element>

<style lang="scss">
    .header {
        background: linear-gradient(-90deg, #8c1630 1.33%, var(--color-black) 97.51%);
        padding: 0 calc(var(--1px) * 40);
        position: relative;

        &.empire {
            --text-product: var(--color-product-empire);
        }

        &.royal {
            --text-product: var(--color-product-royal);
        }

        &__title {
            margin-top: calc(var(--1px) * 20);
        }

        &__img {
            position: absolute;
            top: 50%;
            right: calc(var(--1px) * 38);
            transform: translateY(-50%);
        }
    }

    [data-swappable-header-button] {
        position: absolute;
    }

    [data-swappable-header-button='prev'] {
        left: calc(var(--1px) * 12);
    }

    [data-swappable-header-button='next'] {
        right: calc(var(--1px) * 12);
    }
</style>
