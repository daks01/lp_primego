---
import { getImage } from "astro:assets"
import Container from "./Container.astro";

const { 
  as: Element = "section",
  width,
  class: className,
  backgroundImage,
  invert = false,
  ...props
} = Astro.props;

const optimizedBackgroundImage = backgroundImage 
	? await getImage({ src: backgroundImage, quality: '80' }) 
	: {src:''};
---
<Element 
    {...props} 
    class:list={["section", {"section_invert" : invert}, className]}
	style={backgroundImage ? `background-image: url(${optimizedBackgroundImage?.src})` : ''}
>
	<Container width={width}>
		<slot />
	</Container>
</Element>

<style>
	.section {
		background-position: top center;
		background-size: cover;
		background-repeat: no-repeat;
		position: relative;
		z-index: 1;
		overflow: hidden;
	  /* min-height: calc(var(--adaptive-pixel) * 1080); */
	}
	.section_invert {
		background-color: var(--color-white);
	}
	.section_invert,
	.section_invert * {
		--text-color: var(--color-black);
        --text-product: var(--color-black);
        --color-product: var(--color-black);
		--button-text-color: var(--color-white);
		color: var(--text-color);
	}
</style>